{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/abraao/Desktop/nullbank_client/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import styled from\"styled-components\";import Form from\"../../componentes/transacoes/FormsTrans\";import TableTrans from\"../../componentes/transacoes/TableTrans\";import{toast,ToastContainer}from\"react-toastify\";import GlobalStyle from\"../../styles/global\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: auto;\\n  max-width: 800px;\\n  margin-top: 20px;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  gap: 10px;\\n\"])));const Title=styled.h2(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\"])));function DadosTransacoes(){const[users,setUsers]=useState([]);const[onEdit,setOnEdit]=useState(null);const getUsers=async()=>{try{const clienteCpf='12345678901';// Obter contas associadas ao cliente\nconst resNumero=await axios.get(\"http://localhost:8800/conta_cliente/\");const contasAssociadas=resNumero.data.filter(conta=>conta.clientes_cpf===clienteCpf).map(conta=>conta.contas_numero);// Obter todas as transações\nconst resTransacao=await axios.get(\"http://localhost:8800/transacoes/\");// Filtrar as transações com base nas contas associadas\nconst transacoesAssociadas=resTransacao.data.filter(transacao=>contasAssociadas.includes(transacao.conta_principal));// Atualizar o estado com as transações associadas\nsetUsers(transacoesAssociadas);}catch(error){toast.error(error);}};useEffect(()=>{getUsers();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"Transa\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(Form,{onEdit:onEdit,setOnEdit:setOnEdit,getUsers:getUsers}),/*#__PURE__*/_jsx(TableTrans,{setOnEdit:setOnEdit,users:users,setUsers:setUsers})]}),/*#__PURE__*/_jsx(ToastContainer,{autoClose:3000,position:toast.POSITION.BOTTOM_LEFT}),/*#__PURE__*/_jsx(GlobalStyle,{})]});}export default DadosTransacoes;","map":{"version":3,"names":["styled","Form","TableTrans","toast","ToastContainer","GlobalStyle","React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Container","div","_templateObject","_taggedTemplateLiteral","Title","h2","_templateObject2","DadosTransacoes","users","setUsers","onEdit","setOnEdit","getUsers","clienteCpf","resNumero","get","contasAssociadas","data","filter","conta","clientes_cpf","map","contas_numero","resTransacao","transacoesAssociadas","transacao","includes","conta_principal","error","children","autoClose","position","POSITION","BOTTOM_LEFT"],"sources":["/home/abraao/Desktop/nullbank_client/client/src/pages/paginas_cliente/TransacoesConta.jsx"],"sourcesContent":["\nimport styled from \"styled-components\";\nimport Form from \"../../componentes/transacoes/FormsTrans\"\nimport TableTrans from \"../../componentes/transacoes/TableTrans\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport GlobalStyle from \"../../styles/global\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\n\n\nconst Container = styled.div`\n  width: auto;\n  max-width: 800px;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst Title = styled.h2``;\n\nfunction DadosTransacoes() {\n    const [users, setUsers] = useState([]);\n    const [onEdit, setOnEdit] = useState(null);\n  \n    const getUsers = async () => {\n      try {\n        const clienteCpf = '12345678901';\n\n        // Obter contas associadas ao cliente\n        const resNumero = await axios.get(\"http://localhost:8800/conta_cliente/\");\n        const contasAssociadas = resNumero.data\n          .filter((conta) => conta.clientes_cpf === clienteCpf)\n          .map((conta) => conta.contas_numero);\n        \n        // Obter todas as transações\n        const resTransacao = await axios.get(\"http://localhost:8800/transacoes/\");\n        \n        // Filtrar as transações com base nas contas associadas\n        const transacoesAssociadas = resTransacao.data.filter((transacao) =>\n          contasAssociadas.includes(transacao.conta_principal)\n        );\n        \n        // Atualizar o estado com as transações associadas\n        setUsers(transacoesAssociadas);\n        \n      } catch (error) {\n        toast.error(error);\n      }\n    };\n  \n    useEffect(() => {\n      getUsers();\n    }, []); \n\n  return (\n    <>\n      <Container>\n        <Title>Transações</Title>\n        <Form  onEdit={onEdit} setOnEdit={setOnEdit} getUsers={getUsers}/>\n        <TableTrans setOnEdit={setOnEdit} users={users} setUsers={setUsers} />\n      </Container>\n      <ToastContainer autoClose={3000} position={toast.POSITION.BOTTOM_LEFT} />\n      <GlobalStyle />\n    </>\n  );\n}\n\nexport default DadosTransacoes;"],"mappings":"sLACA,MAAO,CAAAA,MAAM,KAAM,mBAAmB,CACtC,MAAO,CAAAC,IAAI,KAAM,yCAAyC,CAC1D,MAAO,CAAAC,UAAU,KAAM,yCAAyC,CAChE,OAASC,KAAK,CAAEC,cAAc,KAAQ,gBAAgB,CACtD,MAAO,CAAAC,WAAW,KAAM,qBAAqB,CAC7C,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAI1B,KAAM,CAAAC,SAAS,CAAGhB,MAAM,CAACiB,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,uJAQ3B,CAED,KAAM,CAAAC,KAAK,CAAGpB,MAAM,CAACqB,EAAE,CAAAC,gBAAA,GAAAA,gBAAA,CAAAH,sBAAA,QAAE,CAEzB,QAAS,CAAAI,eAAeA,CAAA,CAAG,CACvB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkB,MAAM,CAAEC,SAAS,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAE1C,KAAM,CAAAoB,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACF,KAAM,CAAAC,UAAU,CAAG,aAAa,CAEhC;AACA,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAArB,KAAK,CAACsB,GAAG,CAAC,sCAAsC,CAAC,CACzE,KAAM,CAAAC,gBAAgB,CAAGF,SAAS,CAACG,IAAI,CACpCC,MAAM,CAAEC,KAAK,EAAKA,KAAK,CAACC,YAAY,GAAKP,UAAU,CAAC,CACpDQ,GAAG,CAAEF,KAAK,EAAKA,KAAK,CAACG,aAAa,CAAC,CAEtC;AACA,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAA9B,KAAK,CAACsB,GAAG,CAAC,mCAAmC,CAAC,CAEzE;AACA,KAAM,CAAAS,oBAAoB,CAAGD,YAAY,CAACN,IAAI,CAACC,MAAM,CAAEO,SAAS,EAC9DT,gBAAgB,CAACU,QAAQ,CAACD,SAAS,CAACE,eAAe,CACrD,CAAC,CAED;AACAlB,QAAQ,CAACe,oBAAoB,CAAC,CAEhC,CAAE,MAAOI,KAAK,CAAE,CACdzC,KAAK,CAACyC,KAAK,CAACA,KAAK,CAAC,CACpB,CACF,CAAC,CAEDrC,SAAS,CAAC,IAAM,CACdqB,QAAQ,CAAC,CAAC,CACZ,CAAC,CAAE,EAAE,CAAC,CAER,mBACEf,KAAA,CAAAE,SAAA,EAAA8B,QAAA,eACEhC,KAAA,CAACG,SAAS,EAAA6B,QAAA,eACRlC,IAAA,CAACS,KAAK,EAAAyB,QAAA,CAAC,kBAAU,CAAO,CAAC,cACzBlC,IAAA,CAACV,IAAI,EAAEyB,MAAM,CAAEA,MAAO,CAACC,SAAS,CAAEA,SAAU,CAACC,QAAQ,CAAEA,QAAS,CAAC,CAAC,cAClEjB,IAAA,CAACT,UAAU,EAACyB,SAAS,CAAEA,SAAU,CAACH,KAAK,CAAEA,KAAM,CAACC,QAAQ,CAAEA,QAAS,CAAE,CAAC,EAC7D,CAAC,cACZd,IAAA,CAACP,cAAc,EAAC0C,SAAS,CAAE,IAAK,CAACC,QAAQ,CAAE5C,KAAK,CAAC6C,QAAQ,CAACC,WAAY,CAAE,CAAC,cACzEtC,IAAA,CAACN,WAAW,GAAE,CAAC,EACf,CAAC,CAEP,CAEA,cAAe,CAAAkB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}