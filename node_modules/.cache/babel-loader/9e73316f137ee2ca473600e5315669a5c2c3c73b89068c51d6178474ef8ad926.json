{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/abraao/Desktop/nullbank_client/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import styled from\"styled-components\";import Form from\"../../componentes/transacoes/FormsTrans\";import TableTrans from\"../../componentes/transacoes/TableTrans\";import{toast,ToastContainer}from\"react-toastify\";import GlobalStyle from\"../../styles/global\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: auto;\\n  max-width: 800px;\\n  margin-top: 20px;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  gap: 10px;\\n\"])));const Title=styled.h2(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\"])));function CaixaTransacoes(){const[users,setUsers]=useState([]);const[onEdit,setOnEdit]=useState(null);const getUsers=async()=>{try{const matriculaCaixa='00003';// Fetch transacoes data\nconst transacoesResponse=await axios.get(\"http://localhost:8800/transacoes/\");const transacoesData=transacoesResponse.data;// Fetch funcionarios data\nconst funcionariosResponse=await axios.get(\"http://localhost:8800/func/\");const funcionariosData=funcionariosResponse.data;// Find the caixa (employee) with the specified matriculaCaixa\nconst caixa=funcionariosData.find(funcionario=>funcionario.mat===matriculaCaixa);if(caixa){// Filter transacoes based on conta_principal belonging to the same agencia as caixa\nconst transacoesDoCaixa=transacoesData.filter(transacao=>transacao.conta_principal.num_agencia===caixa.agencia);// Now transacoesDoCaixa contains all transactions with conta_principal in the same agencia as the caixa\nsetUsers(transacoesDoCaixa);}else{console.error('Caixa not found');}}catch(error){toast.error(error);}};useEffect(()=>{getUsers();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"Transa\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(Form,{onEdit:onEdit,setOnEdit:setOnEdit,getUsers:getUsers}),/*#__PURE__*/_jsx(TableTrans,{setOnEdit:setOnEdit,users:users,setUsers:setUsers})]}),/*#__PURE__*/_jsx(ToastContainer,{autoClose:3000,position:toast.POSITION.BOTTOM_LEFT}),/*#__PURE__*/_jsx(GlobalStyle,{})]});}export default CaixaTransacoes;","map":{"version":3,"names":["styled","Form","TableTrans","toast","ToastContainer","GlobalStyle","React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Container","div","_templateObject","_taggedTemplateLiteral","Title","h2","_templateObject2","CaixaTransacoes","users","setUsers","onEdit","setOnEdit","getUsers","matriculaCaixa","transacoesResponse","get","transacoesData","data","funcionariosResponse","funcionariosData","caixa","find","funcionario","mat","transacoesDoCaixa","filter","transacao","conta_principal","num_agencia","agencia","console","error","children","autoClose","position","POSITION","BOTTOM_LEFT"],"sources":["/home/abraao/Desktop/nullbank_client/client/src/pages/paginas_func/CaixaTransacoes.jsx"],"sourcesContent":["\nimport styled from \"styled-components\";\n\nimport Form from \"../../componentes/transacoes/FormsTrans\";\nimport TableTrans from \"../../componentes/transacoes/TableTrans\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport GlobalStyle from \"../../styles/global\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\n\nconst Container = styled.div`\n  width: auto;\n  max-width: 800px;\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n`;\n\nconst Title = styled.h2``;\n\nfunction CaixaTransacoes() {\n    const [users, setUsers] = useState([]);\n    const [onEdit, setOnEdit] = useState(null);\n  \n    const getUsers = async () => {\n      try {\n        const matriculaCaixa = '00003';\n\n// Fetch transacoes data\n        const transacoesResponse = await axios.get(\"http://localhost:8800/transacoes/\");\n        const transacoesData = transacoesResponse.data;\n\n        // Fetch funcionarios data\n        const funcionariosResponse = await axios.get(\"http://localhost:8800/func/\");\n        const funcionariosData = funcionariosResponse.data;\n\n        // Find the caixa (employee) with the specified matriculaCaixa\n        const caixa = funcionariosData.find((funcionario) => funcionario.mat === matriculaCaixa);\n\n        if (caixa) {\n            // Filter transacoes based on conta_principal belonging to the same agencia as caixa\n            const transacoesDoCaixa = transacoesData.filter(\n              (transacao) => transacao.conta_principal.num_agencia === caixa.agencia\n            );\n          \n            // Now transacoesDoCaixa contains all transactions with conta_principal in the same agencia as the caixa\n            setUsers(transacoesDoCaixa);\n          } else {\n            console.error('Caixa not found');\n          }\n        \n      } catch (error) {\n        toast.error(error);\n      }\n    };\n  \n    useEffect(() => {\n      getUsers();\n    }, []); \n\n  return (\n    <>\n     <Container>\n        <Title>Transações</Title>\n        <Form  onEdit={onEdit} setOnEdit={setOnEdit} getUsers={getUsers}/>\n        <TableTrans setOnEdit={setOnEdit} users={users} setUsers={setUsers} />\n      </Container>\n      <ToastContainer autoClose={3000} position={toast.POSITION.BOTTOM_LEFT} />\n      <GlobalStyle />\n    </>\n  );\n}\n\nexport default CaixaTransacoes;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}